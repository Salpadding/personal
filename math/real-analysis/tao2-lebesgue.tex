\chapter{Lebesgue 测度}

\section{外测度}

\subsection{扩展实数集}

外测度中会用到非负的扩展实数集，这个集合上包含了 $+\infty$ 和全体非负实数。这个集合上可以定义加法，我们暂时先用符号 $\mathit{(+)}$ 表示扩展实数集上的加法，以此和实数集上的加法区分。

\[
    a \: (+) \: b = a + b,\, \text{if }a,b \ne +\infty
\]

\[
     \: a \:(+)\: b = +\infty,\, \text{if }a = +\infty \: \text{or} \: b = +\infty,
\]

容易验证 $(+)$ 满足交换律，结合律，所以我们后面可以用 $+$ 替代 $(+)$

同理也可以定义扩展实数集上的小于等于 $(\le)$：

\[
a \:(\le)\: b \: \text{iff} \: b = +\infty \: \text{or} \: a \le b
\]

容易验证 $a \:(\le)\: b$ 和 $b \:(\le)\: a$ 至少有一个成立，而且 $a \:(\le)\: b$ 且 $b \:(\le)\: a$ 可以得出 $a = b$\\
后面可以用 $\le$ 替代 $(\le)$

\subsection{Open Box 定义}

$\mathbb{R}^{n}$ 上的 Open box 定义为 

\[
B = \prod_{i=1}^{n}(a_i, b_i) = \{ (x_1, x_2, .., x_n) \in \Rn \wvert x_i \in (a_i, b_i) \}
\]

其中 $a_i \le b_i, \: a_i, b_i \in \mathbb{R}$ 同时 Open box 的提及 vol 定义为

\[
\text{vol}(B) = \prod_{i=1}^{n}(b_i - a_i)
\]

\subsection{Open Box 覆盖}

假设 $\Omega \subseteq \Rn$，我们称一个包含 Open box 的集族 $(B_j)_{j \in J}  $ 覆盖  $ \Omega $ 当且仅当 

\[
\Omega \subseteq \bigcup_{j \in J} B_j
\]

\subsection{外测度定义}

假设 $\Omega \subseteq \Rn$，$\Omega$ 的外测度$m^*(\Omega)$定义为

\[
m^*(\Omega) = \inf \{\: \sum_{j \in J}\mathrm{vol}(B_j) \wvert \Omega \subseteq \bigcup_{j \in J}B_j,\, J \: \mathrm{ is \: at \: most \: countable} \:\}
\]

注意这里覆盖的Open box 不要求是有限的，而是至多可数的，$m^*(\Omega)$ 的结果可能是扩展实数集中的 $+\infty$。


\section{外测度性质}

\subsection{空集外测度为 0}

显然 $\Rn$ 上可以构造 Open box 
\[
B = \prod_{i=1}^{n}(0, \epsilon)
\]

覆盖 $\emptyset$ 所以根据下确界的性质有 $ 0 \le m^*(\emptyset) \le \epsilon^n$，因为 $\epsilon$ 可以任意小，所以 $m^*(\emptyset) = 0$

\subsection{外测度非负}

根据下确界的性质可以得到。

\subsection{单调性}

如果 $A \subseteq B \subseteq \Rn$，那么有 $m^*(A) \le m^*(B)$

因为 $B$ 的 Open box 覆盖一定能覆盖 $A$，集合的下确界一定小于等于子集的下确界。

\subsection{次可加性}

$(A_j)_{j \in J}$ 是至多可数的集族，那么有

\[
m^*(\bigcup_{j \in J}A_j) \le \sum_{j \in J}m^*(A_j)
\]

证明很容易：不妨设有如下条件，因为如果右边等于 $+\infty$ 那么必定成立。

\[
\sum_{j \in J}m^*(A_j) < +\infty ,\: \forall j \in J,\: m^*(A_j) < +\infty
\]

\[
f: K \to J,\: K \subseteq \mathbb{N} ,\: f\mathrm{\: is \: bijective}
\]

令

\[
A = \bigcup_{j \in J}A_j
\]

然后对$A_j$ 各自的至多可数个 Open box 覆盖作并集

\[
B = \bigcup_{k \in K ,\: j = f(k)}\bigcup_{i \in I_j} B_i, \: A_{j} \subseteq \bigcup_{i \in I_j} B_i, \: \sum_{i \in I_{f(k)}} \mathrm{vol}(B_i) \le m^*(A_j) + \frac{\epsilon}{2^k}
\]

显然 $B$ 是 $A$ 的至多可数覆盖，因为至多可数个 \: 至多可数的集合 \: 的并集一定是至多可数的，思考一下对角线构造法。所以根据下确界的性质

\[
m^*(A) \le \sum_{j \in J}m^*(A_j) + 2\epsilon
\]

因为 $\epsilon$ 可以任意小所以

\[
m^*(\bigcup_{j \in J}A_j) \le \sum_{j \in J}m^*(A_j)
\]

\subsection{Closed box 的外测度}

\[
B = \prod_{i=1}^{n}[a_i, b_i] = \{ (x_1, x_2, .., x_n) \in \Rn \wvert x_i \in [a_i, b_i] \}
\]

那么

\[
m^*(B) = \prod_{i=1}^{n}(b_i - a_i)
\]

证明如下：首先我们证明

\[
m^*(B) \le \prod_{i=1}^{n}(b_i - a_i)
\]

对任意 $\epsilon > 0$ 

\[
B \subseteq \prod_{i=1}^{n}(a_i - \epsilon, b_i + \epsilon)
\]

所以有

\[
m^*(B) \le \prod_{i=1}^{n}(b_i - a_i + \epsilon)
\]

因为 $n$ 是有限的而且 $\epsilon$ 可以任意小所以


\[
m^*(B) \le \prod_{i=1}^{n}(b_i - a_i)
\]

然后要证明


\[
m^*(B) \ge \prod_{i=1}^{n}(b_i - a_i)
\]

就比较困难，因为用开区间覆盖可能会比较分散，我们从 $n = 1$ 开始，用数学归纳法证明上面的不等式。当 $n$ = 1时，因为紧集的开覆盖一定有\,有限的子覆盖，所以我们可以认为 $J$ 是一个有限集。

\[
    [a,b] \subseteq \bigcup_{j \in J}(a_j, b_j)
\]

令 $f_j := \chi_{(a_j, b_j)}$ 这里 $\chi$ 是示性函数。根据 $\chi_{(a_j, b_j)}$  的性质可以得到 $f_j$ 是一个紧支撑函数，并且黎曼可积，并且

\[
\int_{\R}f_j = \int_{a_j}^{b_j}f_j = b_j - a_j
\]

运用黎曼积分的有限项性质，得到

\[
\int_{\R} \sum_{j \in J} f_j = \sum_{j \in J}b_j - a_j
\]

因为 $h = \sum_{j \in J} f_j$ 对任意 $x \in [a,b]$ 都有 $h(x) \ge 1$，所以 

\[
\int_{\R} \sum_{j \in J} f_j = \sum_{j \in J}b_j - a_j \ge b -a
\]

所以 $n=1$ 时有

\[
\sum_{j \in J} \mathrm{vol}(B_j) \ge \prod_{i=1}^{n}(b_i - a_i)
\]

我们现在假设 


\[
\sum_{j \in J} \mathrm{vol}(B_j) \ge \prod_{i=1}^{n}(b_i - a_i)
\]

对 $n = k$ 成立，下面考虑 $n = k +1$ 的情况，注意到

\[
    B_j = \prod_{i=1}^{k+1}(a_i^{(j)}, b_i^{(j)}) = (a_{k+1}^{(j)}, b_{k+1}^{(j)}) \cdot \prod_{i=1}^{k}(a_i^{(j)}, b_i^{(j)})
\]

我们令 

\[
    A_j = \prod_{i=1}^{k}(a_i^{(j)}, b_i^{(j)})
\]

同理构造 $f_j: \R \to \R$

\begin{align*}
    f_j(x) &= \chi_{j}(x)  \cdot \mathrm{vol}(A_j) \\
\chi_{j}(x) &= \chi_{(a_{k+1}^{(j)}, b_{k+1}^{(j)})}(x) 
\end{align*}

得到

\begin{align*}
    \int_{\R} f_j &= \mathrm{vol}(B_j) \\
    \sum_{j \in J} \int_{\R} f_j &=  \int_{\R}\sum_{j \in J} f_j = \sum_{j \in J} \mathrm{vol}(B_j)
\end{align*}


接下来我们要证明 

\[
\prod_{i=1}^{k}[a_i, b_i] = A \subseteq \bigcup_{j \in J} A_j
\]

假设 $x =(x_1, x_2, .., x_k) $ 满足 $a_i \le x_i \le b_i$ 取任意 $x_{k+1} \in (a_{k+1}, b_{k+1}) $ 
得到 $x' = (x_1, x_2, ..,x_{k+1})$，
因为 $x'$ 一定属于某个 $B_j$ 所以 $x$ 一定属于某个 $A_j$，我们现在分析这个由 $x_{k+1} $ 确定的所有 $A_j$。

\[
H(x_{k+1}) = \{ A_j \wvert j \in J;\: x_{k+1} \in (a_{k+1}^{(j)}, b_{k+1}^{(j)}) \}
\]

这样对于任意的 $x_{k+1}$，$H(x_{k+1})$ 都是 $A$ 的一个有限开覆盖。因为 $x \in A$ 可以得到 $x' \in B_j$ 从而得到存在 $A_j \in H(x_{k+1}), \: x \in A_j$
我们再定义函数 $h(x_{k+1})$，并且根据 $n=k$ 成立得到

\begin{align*}
h(x_{k+1}) &= \sum_{A_j \in H(x_{k+1})} \mathrm{vol}(A_j) = \sum_{j \in J}\chi_{j}(x_{k+1}) \mathrm{vol}(A_j) \\
h(x_{k+1}) & \ge \mathrm{vol}(A) 
\end{align*}

 
显然有 $\sum_{j \in J}f_j = h$，所以 $h$ 可积，我们对两边同时在区间 $(a_{k+1}, b_{k+1})$ 上取积分得到


\[
 \int_{\R}\sum_{j \in J}f_j \ge \int_{a_{k+1}}^{b_{k+1}}h(x) \ge (b_n - a_n)\mathrm{vol}(A) \ge \mathrm{vol}(B)
\]


所以我们证明了

\[
    \sum_{j \in J}\mathrm{vol}(B_j) \ge \sum_{j \in J}\int_{\R}f_j \ge \prod_{i=1}^{n}(b_i - a_i)
\]

\subsection{Open box的外测度}

因为 Open box 自身就是一个有限覆盖，所以根据外测度的单调性和下确界的性质得到

\begin{align*}
 \prod_{i=1}^{n}(b_i - a_i) & \le m^*(\prod_{i=1}^{n}(a_i, b_i)) \le \prod_{i=1}^{n}(b_i - a_i) \\
m^*(\prod_{i=1}^{n}(a_i, b_i)) & = \prod_{i=1}^{n}(b_i - a_i)
\end{align*}

\section{常见集合的外测度}

\subsection{实数集的外测度}

$m^*(\R) = +\infty$，因为任意 $[-M, M]$ 都是 $\R$ 的子集，同理 $\R^n$ 的外测度也是 $+\infty$

\subsection{有理数集的外测度}

因为有理数集是可数集，之前我们证明了外测度具有次可加性。所以有

\[
0 \le m^*(\Q) \le \sum_{n \in \N} 0 \le 0
\]

\section{外测度不满足可加性}

\subsection{外测度不满足可数可加性}

下面给出一个反例，来证明外测度不满足可数可加性。令 $x \in \R, \: x + \Q = \{ x + q \wvert q \in \Q \}$。
这个 $x + \Q$ 有个性质，两个实数 $x,\,y$，两个集合 $x + \Q$ 和 $y + \Q$ 要么相等，要么不相交。
因为如果 $x - y \in \Q$ 那么有 $ y + q = y + (x-y) + (y-x) + q = x + q'$， $x + \Q \cap y + \Q$ 会产生 $x -y \in \Q$ 这样的结果。

再考虑集合 

\[
\R / \Q = \{ x + \Q \wvert x \in \R \}
\]

假设 $A \in \R/\Q$，我们利用选择公理，从中取一点 $x_A$，不妨令 $x_A \in [0,1]$，因为有 $x - [x] \in A, \, x - [x] \in [0,1]$。
然后令

\[
 E = \{ x_A \wvert A \in \R/\Q, \, x_A \in A \cap [0,1] \}
\]

这个 $E$ 满足 $E \in [0,1]$，并且对任意的 $q_1, \ne q_2, \, q_1, q_2 \in \Q$ 有 $(q_1 + E) \cap (q_2 + E) = \emptyset$，证明：
假设 $x_1, x_2 \in E$ 满足 $x_1 + q_1 = x_2 + q_2$ 得到 $x_1 - x_2 \in \Q$，因为 $E$ 当中任意两个不同元素 $x,y$ 都有 $x-y \notin \Q$ ，所以有 $x_1 = x_2$ ，这个就跟 $q_1 \ne q_2$ 矛盾了。

我们继续构造集合

\[
X = \bigcup_{q \in [-1,1]} q + E
\]

下面分析 $X$，首先我们证明 $[0,1] \subseteq X$，因为对于 $x \in [0,1]$ 那么必然有 $x + \Q \in \R/\Q$，假设我们上面选择公理对应的函数为 $f$ 并且 $f(x + \Q) = x_0, \, x_0 \in E,\, x - x_0  = q_0 \in \Q$ 
注意到 $-1 \le x - x_0 \le 1$，所以必然有 $x \in (x - x_0) + E$，所以得出结论 $[0,1] \subseteq X$，又因为 $E \subseteq [0,1]$ 而且 $-1 \le q \le 1$ ，所以 $X \subseteq [-1, 2]$

根据外测度的单调性我们得到

\[
1 \le m^*(X) \le 3
\]

如果我们认为外测度满足可数可加性，因为 $X$ 是可数个不相交集合的并集，再根据外测度的平移不变形，有

\[
m^*(X) = \sum_{q \in [-1,1]}m^*(q+E) =  \sum_{q \in [-1,1]}m^*(E)
\]

这里 $m^*(E)$ 要么是 $0$，要么是一个有限的正实数，不论哪种都和 $1 \le m^*(X) \le 3$ 矛盾，所以外测度不满足可数可加性。


\section{可测集}

\subsection{定义}

$\R^n $ 上的可测集 $E$ 定义为满足以下条件的集合

\[
\forall A \subseteq \R^n,\, m^*(A) = m^*(A \cap E) + m^*(A \setminus E)
\]

\subsection{$(0, +\infty)$ 是可测集} 

证明如下，假设 $A \subseteq \R$，令 $ E = (0, +\infty)$并且有

\[
A \subseteq \bigcup_{i \in I} B_i = \bigcup_{i \in I} (a_i, b_i)
\]

注意到有

\begin{align*}
A \cap E &\subseteq E \cap \bigcup_{i \in I} B_i \\
 & \subseteq \bigcup_{i \in I} (B_i \cap E) \\
A \setminus E &\subseteq  (\bigcup_{i \in I} B_i) \setminus E \\
 & \subseteq \bigcup_{i \in I} (B_i \setminus E)
\end{align*}

注意到 $B_i \cap E$ 和 $B_i \cup E$ 依然是区间，而且 $I$ 是至多可数的，所以有

\[
m^*(A\cap E) + m^*(A \cup E) \le \sum_{i \in I} \lvert B_i \cap E\rvert + \lvert B_i \setminus E \rvert + \frac{\epsilon}{2^i}
\]

这里加上 $\epsilon$ 是因为 $B_i \setminus E$ 有可能不再是开区间，所以用一个更大一点的开区间包含。对 $B_i = (a_i, b_i)$ 以及 $a_i, b_i, 0$ 的关系讨论后得到

\[
\lvert B_i \cap E\rvert + \lvert B_i \setminus E \rvert = \lvert B_i \rvert
\]

所以得到

\[
m^*(A\cap E) + m^*(A \cup E) \le \sum_{i \in I} \lvert B_i \rvert + c \cdot \epsilon
\]

对右边取下确界，得到 

\[
m^*(A\cap E) + m^*(A \cup E) \le m^*(A)
\]

\subsection{可测集的补集也是可测集}

这个其实就是利用定义的对称性

\subsection{可测集平移后可测}

假设 $A $ 为任意集合，我们令 $B = A - x$，然后带入 $E$ 可测的条件得到

\[
m^*(B) = m^*(B \cap E) + m^*(B \setminus E)
\]

下面我们将证明 $m^*(B \cap E) = m^*(A \cap E+x)$，并且 $m^*(B \setminus E) = m^*(A \setminus (E + x))$

$y \in B \cap E$ 可以得到 $y \in E$ 并且 $\exists a \in A,\, y = a - x$，于是有 $y + x \in E + x,\, y+x \in A$，
令 $f: B \cap E \to A \cap (E + x),\, f(y) = y + x$，我们继续证明$f$ 是满射。
$y \in A \cap E +x$ 可以得到 $f(y - x) = y $ 容易验证 $f$ 是一个从$B \cap E$ 到 $A \cap E + x$ 的平移变换，所以有 $m^*(B \cap E) = m^*(A \cap E+x)$。

同理我们也可以证明 $B \setminus E$ 和 $A \setminus (E + x)$ 之间存在一个平移变换，所以有 $m^*(B \setminus E) = m^*(A \setminus (E + x))$，
再结合 $m^*(B) = m^*(A)$ 得到，也就是 $E + x$ 可测


\[
m^*(A) = m^*(A \cap (E+x)) + m^*(A \setminus (E + x))
\]

\subsection{可测集的交集可测}

这个证明需要一些技巧，下面假设 $E_1$ 和 $E_2$ 都是可测的，利用可测集的定义可以得到如下的等式：

\begin{align*}
    m^*(A) & = m^*(A \cap E_1) + m^*(A \cap E_1^C) \\ 
    m^*(A) & = m^*(A \cap E_2) + m^*(A \cap E_2^C) \\ 
    m^*(A \cap E_1) & = m^*(A \cap E_1 \cap E_2) + m^*(A \cap E_1 \cap E_2^{C}) \\ 
    m^*(A \cap E_2) & = m^*(A \cap E_1 \cap E_2) + m^*(A \cap E_1^{C} \cap E_2) \\ 
    m^*(A \cap E_1^C) & = m^*(A \cap E_1^C \cap E_2) + m^*(A \cap E_1^C \cap E_2^{C}) \\ 
    m^*(A \cap E_2^C) & = m^*(A \cap E_1 \cap E_2^C) + m^*(A \cap E_1^{C} \cap E_2^C) \\ 
\end{align*}

把上面几个式子全部加起来得到

\[
m^*(A) = m^*(A \cap E_1 \cap E_2) + m^*(A \cap E_1 \cap E_2^{C}) + m^*(A \cap E_1^{C} \cap E_2) + m^*(A \cap E_1^{C} \cap E_2^C)
\]

注意到有 

\[
A \cap E_1 \cap E_2^{C} \cup A \cap E_1^{C} \cap E_2 \cup A \cap E_1^{C} \cap E_2^C = A \cap (E_1^C \cup E_2^C)
\]

原理很简单，令$X = E_1 \cap E_2^{C} = a(b+1), Y = E_1^{C} \cap E_2 = (a+1)b, Z = E_1^C \cap E_2^C = (a+1)(b+1)$ 利用布尔代数和模二运算：

\begin{align*}
    X \cup Y &= a(b+1) + b(a+1) + ab(a+1)(b+1) \\
        & = a + b + ab(ab + a+b + 1) = a+b \\
    X \cup Y \cup Z & = a + b + (a+1)(b+1) + (a+b)(a+1)(b+1) \\
    & = ab + 1 + (a+b)(ab + a+b + 1) \\
    &= ab + 1 = (E_1 \cap E_2)^C = E_1^C \cup E_2^C
\end{align*}

所以根据外测度的次可加性，得到

\begin{align*}
 & m^*(A \cap E_1 \cap E_2) + m^*(A \cap (E_1 \cap E_2)^C) \le m^*(A) \\
 & m^*(A) \le  m^*(A \cap E_1 \cap E_2) + m^*(A \cap (E_1 \cap E_2)^C)
\end{align*}

\subsection{开盒子可测}

$\R^n$ 上的开盒子可以看作是 $2n$ 个平移后半空间的交集，所以开盒子可测。因为闭盒子可以看作是半空间补集的交集，所以闭盒子也是可测的。

\subsection{外测度等于0的集合可测}

根据外测度的单调性有，$m^*(A \cap E) = 0,\, m^*(A \cap E^C) \le m^*(A)$

\subsection{有限可加性}

如果 $E_j$ 是有限的而且不相交的可测集，$A$ 是任意集合，注意这里 $A$ 不一定可测，那么有

\[
m^*(A \cap \bigcup_{j \in J}E_j) = \sum_{j \in J}m^*(A \cap E_j)
\]

证明如下，首先我们从两个集合 $E_1, \, E_2$ 开始，令$Y = E_1 \cup E_2$，根据 $E_2$ 可测得到如下等式

\begin{align*}
    m^*(A \cap X) &= m^*(A \cap X \cap E_2) + m^*(A \cap X \cap E_2 ^C) \\
    &= m^*(A \cap E_2) + m^*(A \cap E_1)
\end{align*}

现在我们证明了两个集合满足有限可加，然后用归纳法证明 $n$ 个集合满足，令 $X_n = X_{n-1} \cup E_n$，根据 $E_n$ 可测得到


\begin{align*}
    m^*(A \cap X_n) &= m^*(A \cap X_n \cap E_n) + m^*(A \cap X_n \cap E_n ^C) \\
    &= m^*(A \cap E_n) + m^*(A \cap X_{n-1}) \\
    &= m^*(A \cap E_n) + \sum_{i=1}^{n-1}m^*(A \cap E_i) \\
    &= \sum_{i=1}^{n}m^*(A \cap E_i)
\end{align*}

\subsection{可数可加性}

当 $E_i,\, i \in \N$ 可测，并且两两不相交时，我们希望 $E_i$ 的并集 $E$ 可测， 并且有如下的等式：

\[
    m^*(A \cap \bigcup_{i=1}^{\infty}E_i) = \sum_{i=1}^{\infty}m^*(A \cap E_i)
\]

根据外测度次可加性，我们有

\[
m^*(A \cap \bigcup_{i=1}^{\infty}E_i) = m^*(\bigcup_{i =1}^{\infty}A \cap E_i) \le \sum_{i=1}^{\infty}m^*(A \cap E_i)
\]

然后我们令

\[
F_N = \bigcup_{i=1}^{N}E_i
\]

于是有根据有限可加性得到

\[
\sum_{i=1}^{N}m^*(A \cap E_i) = m^*(A \cap F_N)
\]

所以有

\[
m^*(A \cap \bigcup_{i=1}^{\infty}E_i) \le \lim_{N \to \infty}m^*(A \cap F_N)
\]

我们继续考虑 $A \setminus F_N$，注意到有 $A \setminus E \subseteq A \setminus F_N$，所以有

\[
m^*(A \setminus E) \le m^*(A \setminus F_N)
\]

结合上面的式子得到

\[
m^*(A \cap E) + m^*(A \setminus E) \le \lim_{N \to \infty}m^*(A \cap F_N) + m^*(A \setminus F_N)
\]

注意到 $F_N$ 可测，所以有

\[
m^*(A \cap F_N) + m^*(A \setminus F_N) = m^*(A)
\]

所以得到了

\[
m^*(A) \le m^*(A \cap E) + m^*(A \setminus E) \le m^*(A)
\]

所以我们证明了 $E$ 可测，我们还需要继续证明 $m^*(E)$ 和 $\sum m^*(E_i)$ 相等。

首先根据外测度次可加性有：

\[
m^*(E) \le \sum_{i=1}^{\infty}m^*(E_i)
\]

因为 $F_N$ 不相交，所以我们可以使用外测度的次可加性，还有可测集的有限的可加性得到

\[
\sum_{i=1}^{N}E_i \le m^*(F_N) \le m^*(E)
\]

然后我们对 $N$ 取极限得到

\[
\sum_{i=1}^{\infty}E_i \le m^*(E)
\]

这就证明了

\[
\sum_{i=1}^{\infty}E_i = m^*(\bigcup_{i=1}^{\infty}E_i) ,\, E_i \cap E_j = \emptyset ,\, E_i \:\text{is measurable}
\]

\subsection{$\sigma$ 代数性质}

可数个可测集的并集是可测的，可数个可测集的交集也是可测的。

假设我们有这样的一个集合列 $A_1, A_2, .., A_n$，我们按照如下的方式构造 $B_i$

\begin{align*}
    B_1 &= A_1 \\
    B_2 &= A_2 \setminus A_1 \\
    B_3 &= A_3 \setminus A_2 \setminus A_1 \\
    .. & \\
    B_k &= A_k \setminus A_{k-1} .. \setminus A_1
\end{align*}

利用良序原理容易验证有，并且 $B_i$ 两两不相交，所以 $A_1, A_2, .. A_n$ 是可测的。

\[
\bigcup_{i=1}^{\infty}B_i = \bigcup_{i=1}^{\infty}A_i
\]

同理，根据补集的性质，还有集合的运算规则可以得出，可数个集合的交集也是可测的。

\renewcommand{\f}{f: \Omega \to \R^m,\, \Omega \subseteq \R^n }
\section{可测函数}

\subsection{定义}

$\f$ 可测定义为，对于任意一个开集 $V \subseteq \R^m$，它的原像 $f^{-1}(V)$ 是可测的。

\subsection{连续函数可测}

这个很自然就能想到，假设 $V$ 是开集，$\f$ 是连续的，那么 $f^{-1}(V)$ 一定是开集，所以可测。

\subsection{等价条件}

$\f$ 可测，当且仅当对任意 $\R^m$ 上的开盒子 $B$，$f^{-1}(B)$ 可测。

充分性：假设 $V \subseteq \R^m$ 是一个开集，因为开集可以表示可数个开盒子的并集，根据原像的同态性质得到：

\begin{align*}
& \bigcup_{i \in I}B_i = V \\
& \bigcup_{i \in I}f^{-1}(B_i) = f^{-1}(V)
\end{align*}

其中 $f^{-1}(B_i)$ 是可测的，而 $I$ 是可数集， 所以 $f^{-1}(V)$ 可测。 

必要性很容易证明，因为 $\R^m$  上的开盒子都是开集，根据可测函数的定义可知， $f^{-1}(B)$ 可测。


\subsection{分量}

我们可以利用内积运算把 $\f$ 写成分量的形式，也就是 $f_i(\vecx) = f(\vecx)^T \mathbf{e}_j$，于是得到了 
$f(\vecx) = [f_1(\vecx), f_2(\vecx), .., f_m(\vecx)]^T $

我们想证明 $f$ 可测当且仅当每个 $f_i$ 可测。

首先我们证明充分性，假设 $B=(a_1,b_1) \cdot (a_2, b_2),.., \cdot(a_m,b_m)$ 是 $\R^m$ 上的一个开盒子，
我们令 $I_j \subseteq \R^m,\, I_j = \{ \vecy \in \R^m \wvert \vecy^T \mathbf{e}_j \in (a_j, b_j)\}$。于是我们可以得到对于每个 $1 \le j \le m$，
$f^{-1}(I_j) = f_j^{-1}((a_j,b_j))$ 都是可测的，根据原像的同态性质得到

\[
f^{-1}(B) = f^{-1}(\bigcap_{j \le m}I_j) =\bigcap_{j \le m}f_j^{-1}((a_j, b_j))
\]

因为可测集的有限交集是可测集，所以 $ f^{-1}(B)$  是可测集。


然后我们证明必要性，假设 $f$ 可测，对于 $f_j$ 值域上的开盒子 $ (a_j, b_j)$，令
$I_j = \{ \vecy \in \R^m \wvert \vecy^T \mathbf{e}_j \in (a_j, b_j)\}$，于是我们得到 $f_j^{-1}((a_j, b_j)) = f^{-1}(I_j)$，
因为 $I_j$ 是一个开集，所以 $f_j^{-1}((a_j, b_j))$ 可测。

这个定理也可以理解为，两个可测函数的笛卡尔积是可测的，可测函数的某个分量也是可测的。


\subsection{连续函数复合可测函数}

假设 $\f$ 可测，$g: X \to \Omega, X \in \R^p$ 是一个连续函数，那么 $g \circ f$ 是可测的。证明很容易，假设 $V$ 是$\R^p$ 上的一个开集，所以
$g^{-1}(V)$ 依然是一个开集，因为 $f$ 可测，所以 $ (g \circ f)^{-1}(V) = f^{-1}(g^{-1}(V))$ 也是可测的。

同理，如果 $f: \Omega\to \R,\, \Omega \subseteq \R^n$是可测的，那么 $\lvert f \rvert,\, \max(f(x), 0), \, \min(f(x), 0)$ 都是可测的。

同理 $f, g: \Omega\to \R,\, \Omega \subseteq \R^n$ 都是可测的，那么 $f +g$，$f-g$，$\max(f,g)$，$\min(f,g)$，$fg$ 都是可测的。

我们只需要证明 $x+y$，$x-y$，$\max(x,y)$，$\min(x,y)$这些 $\R^2 \to \R$ 是连续的就可以。

对于 $x+y$ 有 

\begin{align*}
\lvert h(x+\delta, y+\epsilon) - h(x,y) \rvert &= \lvert \delta + \epsilon \rvert \le \lvert \delta \rvert + \lvert \epsilon \rvert \\
& \le \sqrt{2\delta^2 + 2\epsilon^2}
\end{align*}

$x-y$ 同理。

对于 $fg$ 有

\begin{align*}
\lvert h(x+\delta, y+\epsilon) - h(x,y) \rvert &= \lvert \epsilon\delta + \epsilon x  + \delta y\rvert \le M(\lvert \delta \rvert + \lvert \epsilon \rvert) \\
& \le M\sqrt{2\delta^2 + 2\epsilon^2}
\end{align*}


对于 $x/y,\, y \ne 0$ 有

\begin{align*}
\lvert h(x+\delta, y+\epsilon) - h(x,y) \rvert &= \lvert \frac{\delta y - \epsilon x }{y(y+\epsilon)}\rvert  \\
& \le M(\lvert \delta \rvert + \lvert \epsilon \rvert)
\end{align*}

对于 $\max(x,y)$ 有，我们不妨设 $x \ge y$

\begin{align*}
\lvert h(x+\delta, y+\epsilon) - h(x,y) \rvert &= \lvert \max(x+\delta, y+\epsilon) - x\rvert 
\end{align*}

如果 $x+\delta \ge y + \epsilon$ 有


\begin{align*}
\max(x+\delta, y+\epsilon) - x = \delta
\end{align*}

如果 $x+\delta < y + \epsilon$ 有

\begin{align*}
&\delta \le \max(x+\delta, y+\epsilon) - x = y + \epsilon - x \le \epsilon \\
& - \lvert \delta \rvert \le \max(x+\delta, y+\epsilon) - x = y + \epsilon - x \le \lvert \epsilon \rvert \\
& \lvert\max(x+\delta, y+\epsilon) - x = y + \epsilon - x \rvert \le \max(\lvert \delta \rvert, \lvert \epsilon \rvert) \le \sqrt{2\delta^2 + 2\epsilon^2}
\end{align*}


而 $\min(x,y) = - \max(-x, -y)$ 所以无需再证明。

\subsection{另一个等价条件}

假设 $f: \Omega \to \R,\, \Omega \subseteq \R^n$，那么 $f$ 可测当且仅当对任意 $a \in \R$，$f^{-1}((a, +\infty))$ 可测。

现在假设有开区间 $(a,b)$ 那么根据已知条件 $f^{-1}((a,+\infty))$ 可测。令 $I_b = (b, \infty)$ 那么 $f^{-1}(I_b)$ 也是可测的。

我们继续分析 $f^{-1}(\R \setminus I_b) = \Omega \setminus f^{-1}(I_b)$ 也是可测的。以此类推根据，原像的同态性质，以及可测集对交并，补集运算封闭，
我们可以得到 $f^{-1}((a,b])$ 是可测的。我们可以把 $b$ 缩小，构造可数个集合 $(a, b - \epsilon_n]$ 满足，$a < b - \epsilon_n < b,\, (\epsilon_n)^{(\infty)} = 0$，于是得到了

\[
(a,b) = \bigcup_{n=1}^{\infty}(a, b - \epsilon_n]
\]

根据原像的性质得到

\[
f^{-1}(a,b) = \bigcup_{n=1}^{\infty} f^{-1}((a, b - \epsilon_n])
\]

所以 $f^{-1}(a,b)$ 可测。


必要性很容易证明，因为 $(a, +\infty)$是开集，可以直接套可测函数的定义。

\subsection{扩展实数系上的可测函数}

假设 $f: \Omega \to \R^*$ 的值域是扩展实数系，我们定义 $f$ 可测当且仅当对任意实数 $a$，$f^{-1}((a, +\infty])$ 可测。


\subsection{可测函数的极限可测}

假设有函数序列 $f_n: \Omega \to \R^*$，注意这里 $\R^*$ 是扩展实数集，并且都满足可测，
那么函数 $\sup_{n \in \N} f_n$，$\inf_{n \in \N}f_n$，$\lim \sup_{n \to \infty}f_n$ 和 
$\lim \inf_{n \to \infty}f_n$ 
都是可测的。

令 $g(x) = \sup_{n \in N}f_n(x)$ 则有

\[
g^{-1}((a, +\infty]) = \bigcup_{n = 0}^{\infty}f_n^{-1}((a, +\infty])
\]

证明如下，若 $x$ 在左边集合内，那么有 $\sup_{n \in \N}f_n(x) > a$，所以一定存在 $n$ 满足 $f_n(x) > a$，所以有 $x \in f_n^{-1}((a, +\infty])$
所以 $x$ 在左边能得出 $x$ 在右边。

若$x$ 在右边集合内，则存在 $f_n(x) > a$，所以 $g(x)$ 必然也大于 $a$ 所以 $x$ 在左边集合内，所以上述式子成立，根据可测集合可数并后可测得出 $g$ 也是可测的。


令 $g(x) = \inf_{n \in N}f_n(x)$ 同理也有

\[
g^{-1}([a, +\infty]) = \bigcap_{n = 0}^{\infty}f_n^{-1}([a, +\infty])
\]

证明方法也是同理，利用下确界的性质。

令 $g = \lim \sup_{n \to \infty}f_n$
得到

\[
g^{-1}((a, +\infty)) = \bigcap_{n = 0}^{\infty}\bigcup_{i \ge n}f_n^{-1}((a, +\infty))
\]


令 $g = \lim \inf_{n \to \infty}f_n$
得到

\[
g^{-1}([a, +\infty]) = \bigcup_{n = 0}^{\infty}\bigcap_{i \ge n}f_n^{-1}([a, +\infty])
\]

假设 $f_n$ 逐点收敛到 $g$，那么有

\[
g^{-1}((a, +\infty]) = \bigcup_{n = 0}^{\infty}\bigcap_{i \ge n}f_n^{-1}((a, +\infty])
\]